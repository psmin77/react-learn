# 렌더링 그리고 커밋

1. 렌더링 트리거 (주문을 주방으로 전달)
2. 컴포넌트 렌더링 (주방에서 음식 준비하기)
3. DOM 커밋 (요리를 테이블에 내놓기)

## 1단계: 렌더링 트리거

- 렌더링 발생하는 이유
  1. 컴포넌트의 초기 렌더링인 경우
  2. 컴포넌트의 state가 업데이트된 경우

### 초기 렌더링

- 초기 렌더링 트리거

```jsx
import Image from "./Image.js";
import { createRoot } from "react-dom/client";

const root = createRoot(document.getElementById("root"));
// render 주석 처리하면 이미지가 렌더링 되지 않음
root.render(<Image />);
```

### State 업데이트 리렌더링

- 컴포넌트의 상태를 업데이트하면 자동으로 렌더링 대기열에 추가됨

## 2단계: React 컴포넌트 렌더링

- “렌더링”은 React에서 컴포넌트를 호출하는 것
  - 초기 렌더링에서 React는 루트 컴포넌트 호출
  - 이후 렌더링에서 React는 state 업데이트가 일어나 렌더링을 트리거한 컴포넌트 호출
- 재귀적 단계 → 업데이트된 컴포넌트가 다른 컴포넌트 반환하면 해당 컴포넌트 다음 렌더링 → 중첩된 컴포넌트가 없을 때까지 재귀함

### 렌더링 주의사항

1. 동일한 입력에는 동일한 출력
2. 렌더링 전에 존재했던 데이터(state)를 변경하면 안됨

## 3단계: React가 DOM 변경사항 커밋

- 초기 렌더링에서 React는 `appendChild()` DOM API를 사용하여 모든 DOM 노드를 화면에 표시
- 리렌더링에서 React는 최소한의 필요한 작업을 적용하여 최신 렌더링 출력과 일치시킴
  - → React는 최초 렌더링과 차이가 있는 경우에만 DOM 노드를 변경함
  - → 컴포넌트 내부에서 변경된 내용은 건드리지 않음

## 에필로그: 브라우저 페인트

- React가 DOM을 업데이트한 후 브라우저가 화면을 다시 그림 → “브라우저 렌더링 = 페인팅”

## 요약

- React 앱의 모든 화면 업데이트 단계
  1. 트리거
  2. 렌더링
  3. 커밋
- 렌더링 결과가 이전과 같으면 DOM은 변경되지 않음
