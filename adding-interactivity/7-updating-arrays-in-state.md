## 배열 업데이트하기

- 객체와 마찬가지로 “읽기 전용”으로 처리해야 함
- 일반적으로 *방금 생성한 객체*만 변경해야 함
- 업데이트할 때, 새로운 배열을 state 설정 함수에 전달해야 함
- 원본 배열을 변경하지 않는 `filter()`나 `map()` 함수 사용

|      | 비선호(배열 변경)        | 선호(새 배열)                    |
| ---- | ------------------------ | -------------------------------- |
| 추가 | `push`, `unshift`        | `concat`, `[…arr]` (전개 연산자) |
| 제거 | `pop`, `shift`, `splice` | `filter`, `slice`                |
| 교체 | `splice`, `arr[i]=...`   | `map`                            |
| 정렬 | `reverse`, `sort`        | 배열 복사 후 처리                |

### 배열 항목 삽입

- 새로 삽입하려는 항목의 앞뒤로 `slice`로 전개

```jsx
const nextArtists = [
  // 삽입 지점 이전 항목
  ...artists.slice(0, index),
  // 새 항목
  { id: newId, name: newName },
  // 삽입 지점 이후 항목
  ...artists.slice(index),
];
```

### 배열 기타 변경 적용

- 배열을 뒤집거나 정렬 등에서는 원본 배열을 복사한 뒤 변경해야 함

## 배열 내부의 객체 업데이트하기

- 중첩된 state 업데이트하는 경우 최상위 레벨까지의 복사해야 함
- `map()` 함수 활용 가능

### Immer로 간결한 업데이트 로직

- Immer 라이브러리 활용 가능
- 재할당, `push()`, `pop()` 함수 사용 가능

## 요약

- 배열 state 변경하면 안됨
- 새로운 배열을 만들고 state를 교체해야 함
- `[…arr]` 배열 전개 구문, `filter()`, `map()` 등 활용
- Immer 라이브러리 활용
